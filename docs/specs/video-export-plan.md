# 视频导出方案分析报告

## 1. 核心结论

*   **可实现性**: **完全可行**。
    *   作为纯静态网站，现代浏览器提供了强大的 `Canvas` 和 `MediaRecorder` API，完全可以在用户本地浏览器中生成并导出视频，无需任何后端服务器参与。
*   **预估难度**: **中等**。
    *   技术难点不在于"能不能做"，而在于让动画流畅（60fps）以及处理大尺寸图片（如 4K 画质）时的内存优化。
*   **努力程度**: **约 3 ~ 4 个开发日**（包含完善的 UI 和适配逻辑）。

---

## 2. 推荐技术方案

**架构：`HTML 截图` -> `Canvas 动画合成` -> `MediaRecorder 录制`**

我们不需要复杂的视频处理库（如 ffmpeg.wasm，体积太大且慢），最轻量高效的方案如下：

1.  **单格渲染 (生成素材)**：
    *   创建一个隐藏的 DOM 容器，按照目标尺寸（例如抖音 1080x1920）渲染**单个格子**的高清大图。
    *   利用现有的 `html2canvas` 库，遍历用户填写的每一个格子，生成静态图片素材 (Frame Assets)。
    
2.  **动画合成 (Canvas)**：
    *   创建一个不可见的 `<canvas>` 元素。
    *   编写一个简单的动画循环（RequestAnimationFrame），实现“轮播”效果：
        *   第 T 秒：绘制“格子 A”在屏幕中央。
        *   第 T+1 秒：计算位移，将“格子 A”向左移出，“格子 B”从右侧移入。
        *   添加背景音乐（可选，容易实现）。
    
3.  **视频流录制 (Export)**：
    *   使用浏览器原生的 `canvas.captureStream()` 获取画面流。
    *   使用 `MediaRecorder` API 将流录制为 `WebM` (安卓/PC通用) 或 `MP4` (部分浏览器支持)。
    *   *注：Safari 对 MediaRecorder 支持较晚，可能需要 polyfill 或导出为 GIF 选项，但主流 Chrome/Edge/Android 完美支持。*

---

## 3. 尺寸适配分析

您可以轻松支持多种尺寸，只需在第一步“单格渲染”时调整 CSS 尺寸即可：

*   **抖音/TikTok (9:16)**:
    *   分辨率：1080 x 1920
    *   布局：格子居中，上下留白可放置标题、Logo 或装饰性花纹。适合竖屏滑动。
    
*   **B站/视频网站 (16:9)**:
    *   分辨率：1920 x 1080
    *   布局：格子居中，左右留白，或者采用“画廊模式”一次展示 3 个格子。

**难度评分**: 🌟🌟 (只需配置不同的 CSS 模板即可)

---

## 4. 详细工作量拆解

如果您决定推进此功能，大概的工作步骤如下：

### 第一阶段：核心原型 (1-2 天)
*   [ ] 编写 `VideoGenerator` 类：封装 snapshot -> canvas -> recorder 的逻辑。
*   [ ] 实现“单格”渲染组件：专门用于视频导出的 Vue 组件，样式比格子里更精致（更高清）。
*   [ ] 验证导出功能：确保导出的 `.webm` 文件能播放。

### 第二阶段：UI 与配置 (1-2 天)
*   [ ] 添加“导出视频”模态框：
    *   选择平台（抖音 / B站 / 正方形）。
    *   选择动画速度（快 / 慢）。
*   [ ] 进度条显示：因为生成视频可能需要 5-10 秒，需要友好的 Loading 界面。
*   [ ] 内存优化：确保手机导出时不会崩溃。

---

## 5. 总结

这是一个**非常加分**的功能。对于静态网站来说，能直接生成“短视频营销素材”，会让用户的分享意愿大幅提升 (发抖音比发朋友圈更有流量)。

**建议**：可以先做一个简单的 "Beta 版"，只支持一种尺寸（如抖音竖屏），验证用户反馈后再扩展。
